<!DOCTYPE html>
<html lang="en">
  <head>
<meta charset="utf-8" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
/>
<meta
  name="description"
  content="A Michelson semantics for Tezos built using the K Framework."
/>
<meta name="keywords" content="runtime, verification, rv, k" />
<meta name="author" content="Michelson Semantics | Runtime Verification Inc" />
<meta name="robots" content="index, follow" />

<!--favicon icon-->
<!-- <link rel="icon" type="image/png" href="../assets/img/favicon.ico" /> -->

<title>Michelson Semantics | Runtime Verification Inc</title>

<!-- <base href="/k/" /> -->

<!--web fonts-->
<link
  href="https://fonts.googleapis.com/css?family=Nunito:300,400,600,700,800"
  rel="stylesheet"
/>
<link
  href="https://fonts.googleapis.com/css?family=Lora:400i"
  rel="stylesheet"
/>

<link
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css"
  rel="stylesheet"
/>

<link href="../assets/css/index.css" rel="stylesheet" />

<!--[if (gt IE 9) |!(IE)]><!-->
<!--<link rel="stylesheet" href="/assets/vendor/custom-nav/css/effects/fade-menu.css"/>-->
<!-- <link rel="stylesheet" href="../assets/k/vl-nav/css/effects/slide-menu.css" /> -->
<!--<![endif]-->

  </head>

  <body>
<header
  class="navbar navbar-expand navbar-dark flex-column flex-md-row bd-navbar"
>
  <a class="logo-link" href="../index.html"> Michelson Semantics </a>
  <ul class="navbar-nav ml-md-auto">
    <li class="nav-item">
      <a
        class="nav-link pl-2 pr-1 mx-1 py-3 my-n2"
        href="https://github.com/runtimeverification/michelson-semantics"
        target="_blank"
        rel="noopener"
        aria-label="GitHub"
      >
        <i class="fab fa-github"></i>
      </a>
    </li>
  </ul>
  <!--
  <a
    class="btn btn-rv-blue d-none d-lg-inline-block mb-3 mb-md-0 ml-md-3"
    href="../downloads"
    >Download</a
  >
  -->
</header>


    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
<div class="col-12 col-md-3 col-xl-2 bd-sidebar mb-3">
  <form
    role="search"
    class="bd-search d-flex align-items-center justify-content-between"
  >
    <input
      type="search"
      class="form-control"
      placeholder="Search..."
      aria-label="Search for..."
      autocomplete="false"
      id="search-box"
    />
    <button
      class="btn bd-search-docs-toggle d-md-none p-0 ml-3 collapsed"
      type="button"
      aria-label="Toggle docs navigation"
      style="font-size: 1.4rem"
    >
      <i class="fas fa-bars"></i>
    </button>
  </form>
  <nav class="collapse bd-links" aria-label="Main navigation">
    <div class="bd-toc-item">
      <a class="bd-toc-link" href="../">Homepage</a>
      <a class="bd-toc-link" href="../INSTALL">Install</a>
      <a class="bd-toc-link" href="../USER_GUIDE">User Guide</a>
    </div>
  </nav>
</div>

        <main
          class="col-12 col-md-6 col-xl-8 py-md-3 pl-md-5 bd-content"
          role="main"
        >
          <div class="markdown-preview"><html><head></head><body><h1 id="compatability-layer-for-tezos-client">Compatability Layer for Tezos Client</h1>
<p>For cross-validating this interpreter with the Tezos Client, we need a
compatability layer to translate inputs/outputs back and forth.</p>
<h2 id="michelson-unparser">Michelson Unparser</h2>
<p>The unparser converts from an internal representation to Michelson source.</p>
<pre class="language-k"><code><span class="token keyword">requires</span> <span class="token string">"json.md"</span>
<span class="token keyword">requires</span> <span class="token string">"michelson.md"</span>

<span class="token keyword">module</span> MICHELSON<span class="token operator">-</span>UNPARSER
  <span class="token keyword">imports</span> UNIT<span class="token operator">-</span>TEST<span class="token operator">-</span>COMMON<span class="token operator">-</span>SYNTAX
  <span class="token keyword">imports</span> MICHELSON<span class="token operator">-</span>COMMON
</code></pre>
<h3 id="core-michelson-unparsing">Core Michelson Unparsing</h3>
<pre class="language-k"><code>  <span class="token comment">// We add sorts here to simplify when terms are primitive arguments</span>
  <span class="token keyword">syntax</span> ApplicationData <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> Pair <span class="token operator">|</span> OrData <span class="token operator">|</span> OptionData
  <span class="token keyword">syntax</span> Data <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> ApplicationData
  <span class="token keyword">syntax</span> Data <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> Entrypoint

  <span class="token comment">// Michelson IR Unparsing Entrypoint</span>
  <span class="token keyword">syntax</span> <span class="token keyword">String</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #unparse<span class="token punctuation">(</span>K<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
  <span class="token keyword">rule</span> #unparse<span class="token punctuation">(</span>O<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #doUnparse<span class="token punctuation">(</span>O<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token comment">// First argument is term to unparse, second arg is true iff term is a primitive argument</span>
  <span class="token keyword">syntax</span> <span class="token keyword">String</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #doUnparse<span class="token punctuation">(</span>K<span class="token punctuation">,</span> <span class="token keyword">Bool</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>Elt D1<span class="token punctuation">:</span>Data D2<span class="token punctuation">:</span>Data<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token string">"Elt "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>D1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>D2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>D1<span class="token punctuation">:</span>Data <span class="token punctuation">;</span> DL<span class="token punctuation">:</span>DataList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    #doUnparse<span class="token punctuation">(</span>D1<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" ; "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>DL<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>M1<span class="token punctuation">:</span>MapEntry <span class="token punctuation">;</span> ML<span class="token punctuation">:</span>MapEntryList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    #doUnparse<span class="token punctuation">(</span>M1<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" ; "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>ML<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">syntax</span> <span class="token keyword">String</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #unparseTypeAnnotation<span class="token punctuation">(</span>TypeAnnotation<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">,</span> functional<span class="token punctuation">,</span> hook<span class="token punctuation">(</span>STRING<span class="token punctuation">.</span>token2string<span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token keyword">syntax</span> <span class="token keyword">String</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #unparseVariableAnnotation<span class="token punctuation">(</span>VariableAnnotation<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">,</span> functional<span class="token punctuation">,</span> hook<span class="token punctuation">(</span>STRING<span class="token punctuation">.</span>token2string<span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token keyword">syntax</span> <span class="token keyword">String</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #unparseFieldAnnotation<span class="token punctuation">(</span>FieldAnnotation<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">,</span> functional<span class="token punctuation">,</span> hook<span class="token punctuation">(</span>STRING<span class="token punctuation">.</span>token2string<span class="token punctuation">)</span><span class="token punctuation">]</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>A<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #unparseTypeAnnotation<span class="token punctuation">(</span>A<span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>A<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #unparseVariableAnnotation<span class="token punctuation">(</span>A<span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>A<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #unparseFieldAnnotation<span class="token punctuation">(</span>A<span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span><span class="token punctuation">.</span>AnnotationList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">""</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>A<span class="token punctuation">:</span>Annotation AL<span class="token punctuation">:</span>AnnotationList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    #doUnparse<span class="token punctuation">(</span>A<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>AL<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>Pair D1 DL<span class="token punctuation">:</span>NePairDataList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token string">"Pair "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>D1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>DL<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>D1<span class="token punctuation">:</span>Data DL<span class="token punctuation">:</span>NePairDataList<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    #doUnparse<span class="token punctuation">(</span>D1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>DL<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>Left D<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"Left "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>D<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>Right D<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"Right "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>D<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>Some D<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"Some "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>D<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>None<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"None"</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>D<span class="token punctuation">:</span>ApplicationData<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"("</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>D<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">")"</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span><span class="token punctuation">{</span> ML<span class="token punctuation">:</span>MapEntryList <span class="token punctuation">}</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"{"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>ML<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">"}"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span><span class="token punctuation">{</span> DL<span class="token punctuation">:</span>DataList <span class="token punctuation">}</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"{"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>DL<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">"}"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"{ }"</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>I<span class="token punctuation">:</span><span class="token keyword">Int</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Int2String<span class="token punctuation">(</span>I<span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">:</span><span class="token keyword">String</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"\""</span> <span class="token operator">+</span><span class="token keyword">String</span> S <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">"\""</span>

  <span class="token keyword">syntax</span> <span class="token keyword">String</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #unparseBytes<span class="token punctuation">(</span>Bytes<span class="token punctuation">,</span> <span class="token keyword">Int</span><span class="token punctuation">,</span> <span class="token keyword">String</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">,</span> functional<span class="token punctuation">]</span>
  <span class="token comment">// -----------------------------------------------------------------------</span>
  <span class="token keyword">rule</span> #unparseBytes<span class="token punctuation">(</span>B<span class="token punctuation">,</span> N<span class="token punctuation">,</span> S<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #unparseBytes<span class="token punctuation">(</span>B<span class="token punctuation">,</span> N <span class="token operator">+</span><span class="token keyword">Int</span> <span class="token number">1</span><span class="token punctuation">,</span> S <span class="token operator">+</span><span class="token keyword">String</span> #Char2Hex<span class="token punctuation">(</span>B<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">requires</span> N <span class="token operator">&gt;=</span><span class="token keyword">Int</span> <span class="token number">0</span> andBool N &lt;<span class="token keyword">Int</span> lengthBytes<span class="token punctuation">(</span>B<span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #unparseBytes<span class="token punctuation">(</span>B<span class="token punctuation">,</span> N<span class="token punctuation">,</span> S<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> S
    <span class="token keyword">requires</span> N <span class="token operator">&gt;=</span><span class="token keyword">Int</span> lengthBytes<span class="token punctuation">(</span>B<span class="token punctuation">)</span>

  <span class="token keyword">syntax</span> <span class="token keyword">String</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #Char2Hex<span class="token punctuation">(</span><span class="token keyword">Int</span><span class="token punctuation">)</span>    <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
                  <span class="token operator">|</span> #Char2Hex<span class="token punctuation">(</span><span class="token keyword">String</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
  <span class="token comment">// -------------------------------------------</span>
  <span class="token keyword">rule</span> #Char2Hex<span class="token punctuation">(</span>I<span class="token punctuation">:</span><span class="token keyword">Int</span><span class="token punctuation">)</span>    <span class="token operator">=&gt;</span> #Char2Hex<span class="token punctuation">(</span>Base2String<span class="token punctuation">(</span>I<span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #Char2Hex<span class="token punctuation">(</span>S<span class="token punctuation">:</span><span class="token keyword">String</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> S             <span class="token keyword">requires</span> lengthString<span class="token punctuation">(</span>S<span class="token punctuation">)</span> <span class="token operator">==</span><span class="token keyword">Int</span> <span class="token number">2</span>
  <span class="token keyword">rule</span> #Char2Hex<span class="token punctuation">(</span>S<span class="token punctuation">:</span><span class="token keyword">String</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"0"</span> <span class="token operator">+</span><span class="token keyword">String</span> S <span class="token keyword">requires</span> lengthString<span class="token punctuation">(</span>S<span class="token punctuation">)</span> <span class="token operator">==</span><span class="token keyword">Int</span> <span class="token number">1</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>M<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #unparseBytes<span class="token punctuation">(</span>M<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"0x"</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"True"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"False"</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>#<span class="token class-name">token</span><span class="token punctuation">(</span><span class="token string">"True"</span><span class="token punctuation">,</span> <span class="token string">"MichelsonBoolToken"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"True"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>#<span class="token class-name">token</span><span class="token punctuation">(</span><span class="token string">"False"</span><span class="token punctuation">,</span><span class="token string">"MichelsonBoolToken"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"False"</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>Unit<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"Unit"</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>#Timestamp<span class="token punctuation">(</span>I<span class="token punctuation">)</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #doUnparse<span class="token punctuation">(</span>I<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>#ChainId<span class="token punctuation">(</span>I<span class="token punctuation">)</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #doUnparse<span class="token punctuation">(</span>I<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>#KeyHash<span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>#Mutez<span class="token punctuation">(</span>I<span class="token punctuation">)</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #doUnparse<span class="token punctuation">(</span>I<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>#Address<span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>#Contract<span class="token punctuation">(</span>A<span class="token punctuation">,</span> _<span class="token punctuation">)</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #doUnparse<span class="token punctuation">(</span>#ToString<span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>#Key<span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>#Signature<span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>EP<span class="token punctuation">:</span>Entrypoint<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #doUnparse<span class="token punctuation">(</span>#ToString<span class="token punctuation">(</span>EP<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token comment">// Unparse types.</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>int<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"int"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>nat<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"nat"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>string<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"string"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"bytes"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>mutez<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"mutez"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>bool<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"bool"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>key_hash<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"key_hash"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>timestamp<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"timestamp"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>address<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"address"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>key<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"key"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>unit<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"unit"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>signature<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"signature"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>operation<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"operation"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>chain_id<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"chain_id"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>option<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"option"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>list<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"list"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>set<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"set"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>contract<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"contract"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>pair<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"pair"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>or<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"or"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>lambda<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"lambda"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>map<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"map"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>big_map<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"big_map"</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>T<span class="token punctuation">:</span>NullaryTypeName <span class="token punctuation">(</span>A AL<span class="token punctuation">)</span><span class="token punctuation">:</span>AnnotationList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    #doUnparse<span class="token punctuation">(</span>T<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>A AL<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>T<span class="token punctuation">:</span>NullaryTypeName <span class="token punctuation">(</span>A AL<span class="token punctuation">)</span><span class="token punctuation">:</span>AnnotationList<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token string">"("</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>T <span class="token punctuation">(</span>A AL<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">")"</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>T<span class="token punctuation">:</span>NullaryTypeName <span class="token punctuation">.</span>AnnotationList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #doUnparse<span class="token punctuation">(</span>T<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>TyName<span class="token punctuation">:</span>UnaryTypeName AL<span class="token punctuation">:</span>AnnotationList T<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    #doUnparse<span class="token punctuation">(</span>TyName<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>AL<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>T<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>TyName<span class="token punctuation">:</span>UnaryTypeName AL<span class="token punctuation">:</span>AnnotationList T<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token string">"("</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>TyName AL T<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">")"</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>TyName<span class="token punctuation">:</span>BinaryTypeName AL<span class="token punctuation">:</span>AnnotationList T1 T2<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    #doUnparse<span class="token punctuation">(</span>TyName<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>AL<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>T1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>T2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>TyName<span class="token punctuation">:</span>BinaryTypeName AL<span class="token punctuation">:</span>AnnotationList T1 T2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token string">"("</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>TyName AL T1 T2<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">")"</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>TyName<span class="token punctuation">:</span>BinaryPlusTypeName AL<span class="token punctuation">:</span>AnnotationList T1<span class="token punctuation">:</span>Type TL<span class="token punctuation">:</span>NeTypeList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    #doUnparse<span class="token punctuation">(</span>TyName<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>AL<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>T1 TL<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>TyName<span class="token punctuation">:</span>BinaryPlusTypeName AL<span class="token punctuation">:</span>AnnotationList T1<span class="token punctuation">:</span>Type TL<span class="token punctuation">:</span>NeTypeList<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token string">"("</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>TyName AL T1 TL<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">")"</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>T1<span class="token punctuation">:</span>Type TL<span class="token punctuation">:</span>NeTypeList<span class="token punctuation">,</span> B<span class="token punctuation">:</span><span class="token keyword">Bool</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #doUnparse<span class="token punctuation">(</span>T1<span class="token punctuation">,</span> B<span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>TL<span class="token punctuation">,</span> B<span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>DROP AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"DROP"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>DROP AList I<span class="token punctuation">:</span><span class="token keyword">Int</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"DROP"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>I<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>DIG AList I<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"DIG"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>I<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>DUG AList I<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"DUG"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>I<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>DUP AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"DUP"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>SWAP AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"SWAP"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>PUSH AList T D<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"PUSH"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>T<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>D<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>SOME AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"SOME"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>NONE AList T<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"NONE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>T<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>UNIT AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"UNIT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>IF_NONE AList B1 B2<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"IF_NONE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>PAIR AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"PAIR"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>UNPAIR AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"UNPAIR"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>CAR AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"CAR"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>CDR AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"CDR"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>LEFT AList T<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"LEFT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>T<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>RIGHT AList T<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"RIGHT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>T<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>IF_LEFT AList B1 B2<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"IF_LEFT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>IF_RIGHT AList B1 B2<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"IF_RIGHT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>NIL AList T<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"NIL"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>T<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>CONS AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"CONS"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>IF_CONS AList B1 B2<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"IF_CONS"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>SIZE AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"SIZE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>EMPTY_SET AList T<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"EMPTY_SET"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>T<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>EMPTY_MAP AList T1 T2<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"EMPTY_MAP"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>T1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>T2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>EMPTY_BIG_MAP AList T1 T2<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"EMPTY_BIG_MAP"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>T1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>T2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>MAP AList B<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"MAP"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ITER AList B<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ITER"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>MEM AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"MEM"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>GET AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"GET"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>UPDATE AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"UPDATE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>IF AList B1 B2<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"IF"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>LOOP AList B<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"LOOP"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>LOOP_LEFT AList B<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"LOOP_LEFT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>LAMBDA AList T1 T2 B<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"LAMBDA"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>T1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>T2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>EXEC AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"EXEC"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>APPLY AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"APPLY"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>DIP AList B<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"DIP"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>DIP AList I<span class="token punctuation">:</span><span class="token keyword">Int</span> B<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"DIP"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>I<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>FAILWITH AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"FAILWITH"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>CAST AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"CAST"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>RENAME AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"RENAME"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>CONCAT AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"CONCAT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>SLICE AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"SLICE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>PACK AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"PACK"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>UNPACK AList T<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"UNPACK"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>T<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ADD AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ADD"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>SUB AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"SUB"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>MUL AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"MUL"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>EDIV AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"EDIV"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ABS AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ABS"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ISNAT AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ISNAT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>INT AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"INT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>NEG AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"NEG"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>LSL AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"LSL"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>LSR AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"LSR"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>OR AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"OR"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>AND AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"AND"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>XOR AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"XOR"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>NOT AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"NOT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>COMPARE AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"COMPARE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>EQ AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"EQ"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>NEQ AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"NEQ"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>LT AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"LT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>GT AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"GT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>LE AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"LE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>GE AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"GE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>SELF AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"SELF"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>CONTRACT AList T<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"CONTRACT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>T<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>TRANSFER_TOKENS AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"TRANSFER_TOKENS"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>SET_DELEGATE AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"SET_DELEGATE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>CREATE_ACCOUNT AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"CREATE_ACCOUNT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>IMPLICIT_ACCOUNT AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"IMPLICIT_ACCOUNT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>NOW AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"NOW"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>CHAIN_ID AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"CHAIN_ID"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>AMOUNT AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"AMOUNT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>BALANCE AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"BALANCE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>CHECK_SIGNATURE AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"CHECK_SIGNATURE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>BLAKE2B AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"BLAKE2B"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>SHA256 AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"SHA256"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>SHA512 AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"SHA512"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>HASH_KEY AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"HASH_KEY"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>STEPS_TO_QUOTA AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"STEPS_TO_QUOTA"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>SOURCE AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"SOURCE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>SENDER AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"SENDER"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ADDRESS AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ADDRESS"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>CREATE_CONTRACT AList <span class="token punctuation">{</span> C <span class="token punctuation">}</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"CREATE_CONTRACT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" {"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>C<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">"}"</span>
</code></pre>
<h3 id="macro-unparsing">Macro Unparsing</h3>
<pre class="language-k"><code>  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>CMPEQ AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"CMPEQ"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>CMPNEQ AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"CMPNEQ"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>CMPLT AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"CMPLT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>CMPGT AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"CMPGT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>CMPLE AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"CMPLE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>CMPGE AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"CMPGE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>IFEQ AList B1 B2<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"IFEQ"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>IFNEQ AList B1 B2<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"IFNEQ"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>IFLT AList B1 B2<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"IFLT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>IFGT AList B1 B2<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"IFGT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>IFLE AList B1 B2<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"IFLE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>IFGE AList B1 B2<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"IFGE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>IFCMPEQ AList B1 B2<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"IFCMPEQ"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>IFCMPNEQ AList B1 B2<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"IFCMPNEQ"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>IFCMPLT AList B1 B2<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"IFCMPLT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>IFCMPGT AList B1 B2<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"IFCMPGT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>IFCMPLE AList B1 B2<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"IFCMPLE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>IFCMPGE AList B1 B2<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"IFCMPGE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>FAIL AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"FAIL"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ASSERT AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ASSERT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ASSERT_EQ AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ASSERT_EQ"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ASSERT_NEQ AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ASSERT_NEQ"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ASSERT_LT AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ASSERT_LT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ASSERT_LE AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ASSERT_LE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ASSERT_GT AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ASSERT_GT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ASSERT_GE AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ASSERT_GE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ASSERT_CMPEQ AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ASSERT_CMPEQ"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ASSERT_CMPNEQ AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ASSERT_CMPNEQ"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ASSERT_CMPLT AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ASSERT_CMPLT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ASSERT_CMPLE AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ASSERT_CMPLE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ASSERT_CMPGT AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ASSERT_CMPGT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ASSERT_CMPGE AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ASSERT_CMPGE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ASSERT_NONE AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ASSERT_NONE"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ASSERT_SOME AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ASSERT_SOME"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ASSERT_LEFT AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ASSERT_LEFT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>ASSERT_RIGHT AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"ASSERT_RIGHT"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>IF_SOME AList B1 B2<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"IF_SOME"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>B2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>SET_CAR AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"SET_CAR"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>SET_CDR AList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"SET_CDR"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>MAP_CAR AList Body<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"MAP_CAR"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>Body<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>MAP_CDR AList Body<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"MAP_CDR"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>Body<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>DUP AList N<span class="token punctuation">:</span><span class="token keyword">Int</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"DUP"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>AList<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>N<span class="token punctuation">:</span><span class="token keyword">Int</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>D<span class="token punctuation">:</span>DIPMacro A B<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #DIPMacroToString<span class="token punctuation">(</span>D<span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
                                        <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
                                        #doUnparse<span class="token punctuation">(</span>A<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
                                        <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
                                        #doUnparse<span class="token punctuation">(</span>B<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>D<span class="token punctuation">:</span>DUPMacro A<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #DUPMacroToString<span class="token punctuation">(</span>D<span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
                                      <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
                                      #doUnparse<span class="token punctuation">(</span>A<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>C<span class="token punctuation">:</span>CDARMacro A<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #CDARMacroToString<span class="token punctuation">(</span>C<span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
                                       <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
                                       #doUnparse<span class="token punctuation">(</span>A<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>C<span class="token punctuation">:</span>SetCDARMacro A<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #SetCDARMacroToString<span class="token punctuation">(</span>C<span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
                                          <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
                                          #doUnparse<span class="token punctuation">(</span>A<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>C<span class="token punctuation">:</span>MapCDARMacro A Body<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #MapCDARMacroToString<span class="token punctuation">(</span>C<span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
                                               <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
                                               #doUnparse<span class="token punctuation">(</span>A<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
					       <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
					       #doUnparse<span class="token punctuation">(</span>Body<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
</code></pre>
<p>The following macros are currently disabled.</p>
<pre class="language-text"><code>  rule #doUnparse(P:PairMacro A, _) =&gt; #PairMacroToString(P) +String
                                       " " +String
                                       #doUnparse(A, false)

  rule #doUnparse(U:UnpairMacro A, _) =&gt; #UnpairMacroToString(U) +String
                                         " " +String
                                         #doUnparse(A, false)
</code></pre>
<h3 id="michelson-groups%2Ftzt-extexnsion-unparsing">Michelson Groups/TZT Extexnsion Unparsing</h3>
<pre class="language-k"><code>  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>storage T<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"storage "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>T<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>parameter T<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"parameter "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>T<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span><span class="token punctuation">(</span>C<span class="token punctuation">:</span>CodeDecl <span class="token punctuation">;</span> S<span class="token punctuation">:</span>StorageDecl <span class="token punctuation">;</span> P<span class="token punctuation">:</span>ParameterDecl<span class="token punctuation">)</span><span class="token punctuation">:</span>Contract<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    #doUnparse<span class="token punctuation">(</span>C<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">"; "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">"; "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>P<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span><span class="token punctuation">(</span>C<span class="token punctuation">:</span>CodeDecl <span class="token punctuation">;</span> S<span class="token punctuation">:</span>StorageDecl <span class="token punctuation">;</span> P<span class="token punctuation">:</span>ParameterDecl <span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>Contract<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    #doUnparse<span class="token punctuation">(</span>C<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">"; "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">"; "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>P<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">";"</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>Contract S<span class="token punctuation">:</span><span class="token keyword">String</span> T<span class="token punctuation">:</span>Type<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token string">"Contract "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>T<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>O<span class="token punctuation">:</span>OtherContractsMapEntry <span class="token punctuation">;</span> O'<span class="token punctuation">:</span>OtherContractsMapEntry <span class="token punctuation">;</span> Os<span class="token punctuation">:</span>OtherContractsMapEntryList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    #doUnparse<span class="token punctuation">(</span>O<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">"; "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>O' <span class="token punctuation">;</span> Os<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>O<span class="token punctuation">:</span>OtherContractsMapEntry <span class="token punctuation">;</span> <span class="token punctuation">.</span>OtherContractsMapEntryList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #doUnparse<span class="token punctuation">(</span>O<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span><span class="token punctuation">.</span>OtherContractsMapEntryList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">""</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>Big_map I T1 T2 <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token string">"Big_map"</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>I<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>T1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>T2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" { }"</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>Big_map I T1 T2 ML<span class="token punctuation">:</span>NeMapLiteral<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token string">"Big_map"</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>I<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>T1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>T2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>ML<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>O<span class="token punctuation">:</span>BigMapEntry <span class="token punctuation">;</span> O'<span class="token punctuation">:</span>BigMapEntry <span class="token punctuation">;</span> Os<span class="token punctuation">:</span>BigMapEntryList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    #doUnparse<span class="token punctuation">(</span>O<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">"; "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>O' <span class="token punctuation">;</span> Os<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>O<span class="token punctuation">:</span>BigMapEntry <span class="token punctuation">;</span> <span class="token punctuation">.</span>BigMapEntryList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #doUnparse<span class="token punctuation">(</span>O<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span><span class="token punctuation">.</span>BigMapEntryList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">""</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>contract <span class="token punctuation">{</span> C <span class="token punctuation">}</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"contract { "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>C<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">"}"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>now I<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"now "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>I<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>sender S<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"sender "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>source S<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"source "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span><span class="token punctuation">(</span>chain_id S<span class="token punctuation">)</span><span class="token punctuation">:</span>Group<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"chain_id "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>self S<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"self "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>amount S<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"amount "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>balance S<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"balance "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>other_contracts <span class="token punctuation">{</span> S <span class="token punctuation">}</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"other_contracts {"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">"}"</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>parameter_value S<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"parameter_value "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>storage_value S<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"storage_value "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>big_maps <span class="token punctuation">{</span> S <span class="token punctuation">}</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"big_maps {"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">"}"</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>G<span class="token punctuation">:</span>Group <span class="token punctuation">;</span> Gs<span class="token punctuation">:</span>Groups<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #doUnparse<span class="token punctuation">(</span>G<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">";\n"</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>Gs<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>Stack_elt T D<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token string">"Stack_elt "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>T<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>D<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">:</span>StackElementLiteral <span class="token punctuation">;</span> Ss<span class="token punctuation">:</span>StackElementList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">"; "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>Ss<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">requires</span> notBool Ss <span class="token operator">==</span>K <span class="token punctuation">.</span>StackElementList

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">:</span>StackElementLiteral <span class="token punctuation">;</span> <span class="token punctuation">.</span>StackElementList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span><span class="token punctuation">.</span>StackElementList<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">""</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span><span class="token punctuation">{</span> S<span class="token punctuation">:</span>StackElementList <span class="token punctuation">}</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token string">"{"</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">"}"</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>Create_contract <span class="token punctuation">{</span> C <span class="token punctuation">}</span> O M D I<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token string">"Create_contract { "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>C<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" } "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>O<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>M<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>D<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>I<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>Transfer_tokens O M A<span class="token punctuation">:</span>Entrypoint I<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token string">"Transfer_tokens "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>O<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>M<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>A<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>I<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>Transfer_tokens O M A<span class="token punctuation">:</span><span class="token keyword">String</span> I<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token string">"Transfer_tokens "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>O<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>M<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>A<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>I<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>Set_delegate O I<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token string">"Set_delegate "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>O<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>I<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span><span class="token punctuation">(</span> Failed D <span class="token punctuation">)</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"( Failed "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>D<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">")"</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span><span class="token punctuation">(</span> MutezOverflow I1 I2 <span class="token punctuation">)</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token string">"( MutezOverflow "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>I1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>I2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">")"</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span><span class="token punctuation">(</span> MutezUnderflow I1 I2 <span class="token punctuation">)</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token string">"( MutezUnderflow "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>I1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>I2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">")"</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span><span class="token punctuation">(</span> GeneralOverflow I1 I2 <span class="token punctuation">)</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token string">"( GeneralOverflow "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>I1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">" "</span> <span class="token operator">+</span><span class="token keyword">String</span>
    #doUnparse<span class="token punctuation">(</span>I2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
    <span class="token string">")"</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>code I<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"code "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>I<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>input C<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"input "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>C<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>output LS<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"output "</span> <span class="token operator">+</span><span class="token keyword">String</span> #doUnparse<span class="token punctuation">(</span>LS<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #doUnparse<span class="token punctuation">(</span>_<span class="token punctuation">:</span>Wildcard<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"_"</span>
<span class="token keyword">endmodule</span>
</code></pre>
<h2 id="common">Common</h2>
<p>Here are common files shared between different compatibility semantics.</p>
<pre class="language-k"><code>
<span class="token keyword">module</span> COMPAT<span class="token operator">-</span>COMMON
  <span class="token keyword">imports</span> UNIT<span class="token operator">-</span>TEST<span class="token operator">-</span>COMMON<span class="token operator">-</span>SYNTAX
  <span class="token keyword">imports</span> MICHELSON<span class="token operator">-</span>UNPARSER

  <span class="token keyword">configuration</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> $PGM<span class="token punctuation">:</span>Pgm <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>knownaddrs</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span>Map <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>knownaddrs</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>out</span> <span class="token attr-name">stream</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stdout<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span>List <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>out</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>returncode</span> <span class="token attr-name">exit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> <span class="token number">1</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>returncode</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>When the <code>&lt;k&gt;</code> cell is empty, we consider execution successful</p>
<pre class="language-k"><code>  <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span>K <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>returncode</span><span class="token punctuation">&gt;</span></span> <span class="token number">1</span> <span class="token operator">=&gt;</span> <span class="token number">0</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>returncode</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">endmodule</span>
</code></pre>
<h2 id="contract-expander">Contract Expander</h2>
<pre class="language-k"><code><span class="token keyword">module</span> CONTRACT<span class="token operator">-</span>EXPANDER<span class="token operator">-</span>SYNTAX
  <span class="token keyword">imports</span> UNIT<span class="token operator">-</span>TEST<span class="token operator">-</span>SYNTAX
<span class="token keyword">endmodule</span>

<span class="token keyword">module</span> CONTRACT<span class="token operator">-</span>EXPANDER
  <span class="token keyword">imports</span> COMPAT<span class="token operator">-</span>COMMON

  <span class="token keyword">syntax</span> Block <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #StackEltToPush<span class="token punctuation">(</span>StackElementLiteral<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
  <span class="token keyword">rule</span> #StackEltToPush<span class="token punctuation">(</span>Stack_elt <span class="token punctuation">(</span>contract _<span class="token punctuation">:</span>AnnotationList T<span class="token punctuation">:</span>Type<span class="token punctuation">)</span> D<span class="token punctuation">:</span>Data<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> PUSH <span class="token punctuation">.</span>AnnotationList address <span class="token punctuation">.</span>AnnotationList D <span class="token punctuation">;</span>
                                                                                 CONTRACT <span class="token punctuation">.</span>AnnotationList T <span class="token punctuation">;</span>
                                                                                 IF_SOME <span class="token punctuation">.</span>AnnotationList <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token punctuation">{</span> UNIT <span class="token punctuation">.</span>AnnotationList <span class="token punctuation">;</span> FAILWITH <span class="token punctuation">.</span>AnnotationList <span class="token punctuation">}</span> <span class="token punctuation">}</span>
  <span class="token keyword">rule</span> #StackEltToPush<span class="token punctuation">(</span>Stack_elt T D<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> PUSH <span class="token punctuation">.</span>AnnotationList T D <span class="token punctuation">}</span> <span class="token punctuation">[</span>owise<span class="token punctuation">]</span>

  <span class="token keyword">syntax</span> Block <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #StackToPush<span class="token punctuation">(</span>LiteralStack<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>

  <span class="token keyword">syntax</span> Block <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #StackToPushAux<span class="token punctuation">(</span>StackElementList<span class="token punctuation">,</span> Block<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
  <span class="token keyword">rule</span> #StackToPush<span class="token punctuation">(</span> <span class="token punctuation">{</span> Se <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #StackToPushAux<span class="token punctuation">(</span>Se<span class="token punctuation">,</span> <span class="token punctuation">{</span> DROP <span class="token punctuation">.</span>AnnotationList <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #StackToPushAux<span class="token punctuation">(</span>Se <span class="token punctuation">;</span> Ls<span class="token punctuation">,</span> <span class="token punctuation">{</span> I<span class="token punctuation">:</span>DataList <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token operator">=&gt;</span> #StackToPushAux<span class="token punctuation">(</span>Ls<span class="token punctuation">,</span> <span class="token punctuation">{</span> #StackEltToPush<span class="token punctuation">(</span>Se<span class="token punctuation">)</span> <span class="token punctuation">;</span> I <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">requires</span> notBool Ls <span class="token operator">==</span>K <span class="token punctuation">.</span>StackElementList
  <span class="token keyword">rule</span> #StackToPushAux<span class="token punctuation">(</span>Se<span class="token punctuation">,</span> <span class="token punctuation">{</span> I<span class="token punctuation">:</span>DataList <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> #StackEltToPush<span class="token punctuation">(</span>Se<span class="token punctuation">)</span> <span class="token punctuation">;</span> I <span class="token punctuation">}</span>
  <span class="token keyword">rule</span> #StackToPushAux<span class="token punctuation">(</span><span class="token punctuation">.</span>StackElementList<span class="token punctuation">,</span> <span class="token punctuation">{</span> I<span class="token punctuation">:</span>DataList <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> I <span class="token punctuation">}</span>

  <span class="token keyword">syntax</span> Contract <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #FillTemplateContract<span class="token punctuation">(</span>Block<span class="token punctuation">,</span> Block<span class="token punctuation">,</span> Type<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>

  <span class="token keyword">syntax</span> <span class="token keyword">Bool</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #CodeBlockEndsWithFail<span class="token punctuation">(</span>Block<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
  <span class="token keyword">rule</span> #CodeBlockEndsWithFail<span class="token punctuation">(</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">false</span>
  <span class="token keyword">rule</span> #CodeBlockEndsWithFail<span class="token punctuation">(</span> <span class="token punctuation">{</span> <span class="token punctuation">{</span> Is <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #CodeBlockEndsWithFail<span class="token punctuation">(</span> <span class="token punctuation">{</span> Is <span class="token punctuation">}</span> <span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #CodeBlockEndsWithFail<span class="token punctuation">(</span> <span class="token punctuation">{</span> I<span class="token punctuation">:</span>Instruction <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>FAILWITH _<span class="token punctuation">)</span> <span class="token punctuation">:</span><span class="token operator">=</span>K I<span class="token punctuation">)</span> <span class="token punctuation">[</span>owise<span class="token punctuation">]</span>
  <span class="token keyword">rule</span> #CodeBlockEndsWithFail<span class="token punctuation">(</span> <span class="token punctuation">{</span> _<span class="token punctuation">:</span>Instruction <span class="token punctuation">;</span> Is <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #CodeBlockEndsWithFail<span class="token punctuation">(</span> <span class="token punctuation">{</span> Is <span class="token punctuation">}</span> <span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #FillTemplateContract<span class="token punctuation">(</span>PushBlock<span class="token punctuation">,</span> CodeBlock<span class="token punctuation">,</span> ParamType<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  parameter ParamType <span class="token punctuation">;</span> storage unit <span class="token punctuation">.</span>AnnotationList <span class="token punctuation">;</span> code <span class="token punctuation">{</span> DROP <span class="token punctuation">.</span>AnnotationList <span class="token punctuation">;</span> PushBlock <span class="token punctuation">;</span> CodeBlock <span class="token punctuation">;</span> UNIT #<span class="token class-name">token</span><span class="token punctuation">(</span><span class="token string">"@exitToken"</span><span class="token punctuation">,</span> <span class="token string">"VariableAnnotation"</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> FAILWITH <span class="token punctuation">.</span>AnnotationList <span class="token punctuation">}</span>  <span class="token punctuation">;</span>
  <span class="token keyword">requires</span> notBool #CodeBlockEndsWithFail<span class="token punctuation">(</span>CodeBlock<span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #FillTemplateContract<span class="token punctuation">(</span>PushBlock<span class="token punctuation">,</span> CodeBlock<span class="token punctuation">,</span> ParamType<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  parameter ParamType <span class="token punctuation">;</span> storage unit <span class="token punctuation">.</span>AnnotationList <span class="token punctuation">;</span> code <span class="token punctuation">{</span> DROP <span class="token punctuation">.</span>AnnotationList <span class="token punctuation">;</span> PushBlock <span class="token punctuation">;</span> CodeBlock <span class="token punctuation">}</span>  <span class="token punctuation">;</span>
  <span class="token keyword">requires</span> #CodeBlockEndsWithFail<span class="token punctuation">(</span>CodeBlock<span class="token punctuation">)</span>

  <span class="token keyword">syntax</span> LiteralStack <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #FindInputGroup<span class="token punctuation">(</span>Groups<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
  <span class="token keyword">rule</span> #FindInputGroup<span class="token punctuation">(</span>input T<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> T
  <span class="token keyword">rule</span> #FindInputGroup<span class="token punctuation">(</span>input T <span class="token punctuation">;</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> T
  <span class="token keyword">rule</span> #FindInputGroup<span class="token punctuation">(</span>_ <span class="token punctuation">;</span> G<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #FindInputGroup<span class="token punctuation">(</span>G<span class="token punctuation">)</span> <span class="token punctuation">[</span>owise<span class="token punctuation">]</span>

  <span class="token keyword">syntax</span> Block <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #FindCodeGroup<span class="token punctuation">(</span>Groups<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
  <span class="token keyword">rule</span> #FindCodeGroup<span class="token punctuation">(</span>code T<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> T <span class="token punctuation">}</span>
  <span class="token keyword">rule</span> #FindCodeGroup<span class="token punctuation">(</span>code T <span class="token punctuation">;</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> T <span class="token punctuation">}</span>
  <span class="token keyword">rule</span> #FindCodeGroup<span class="token punctuation">(</span>_ <span class="token punctuation">;</span> G<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #FindCodeGroup<span class="token punctuation">(</span>G<span class="token punctuation">)</span> <span class="token punctuation">[</span>owise<span class="token punctuation">]</span>

  <span class="token keyword">syntax</span> Type <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #FindParamType<span class="token punctuation">(</span>Groups<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
  <span class="token keyword">rule</span> #FindParamType<span class="token punctuation">(</span>parameter T<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> T
  <span class="token keyword">rule</span> #FindParamType<span class="token punctuation">(</span>parameter T <span class="token punctuation">;</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> T
  <span class="token keyword">rule</span> #FindParamType<span class="token punctuation">(</span>_<span class="token punctuation">:</span>Group<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> unit <span class="token punctuation">.</span>AnnotationList <span class="token punctuation">[</span>owise<span class="token punctuation">]</span>
  <span class="token keyword">rule</span> #FindParamType<span class="token punctuation">(</span>_ <span class="token punctuation">;</span> Rs<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #FindParamType<span class="token punctuation">(</span>Rs<span class="token punctuation">)</span> <span class="token punctuation">[</span>owise<span class="token punctuation">]</span>

  <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> G<span class="token punctuation">:</span>Groups <span class="token operator">=&gt;</span> <span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>out</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span>List <span class="token operator">=&gt;</span> ListItem<span class="token punctuation">(</span>#unparse<span class="token punctuation">(</span>#FillTemplateContract<span class="token punctuation">(</span>#StackToPush<span class="token punctuation">(</span>#FindInputGroup<span class="token punctuation">(</span>G<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> #FindCodeGroup<span class="token punctuation">(</span>G<span class="token punctuation">)</span><span class="token punctuation">,</span> #FindParamType<span class="token punctuation">(</span>G<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>out</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">endmodule</span>
</code></pre>
<h2 id="extractor">Extractor</h2>
<pre class="language-k"><code><span class="token keyword">module</span> EXTRACTOR<span class="token operator">-</span>SYNTAX
  <span class="token keyword">imports</span> UNIT<span class="token operator">-</span>TEST<span class="token operator">-</span>SYNTAX
<span class="token keyword">endmodule</span>

<span class="token keyword">module</span> EXTRACTOR
  <span class="token keyword">imports</span> COMPAT<span class="token operator">-</span>COMMON
  <span class="token keyword">imports</span> JSON

  <span class="token keyword">syntax</span> JSONKey <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #KeyFromGroup<span class="token punctuation">(</span>Group<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>

  <span class="token keyword">rule</span> #KeyFromGroup<span class="token punctuation">(</span>G<span class="token punctuation">:</span>ContractGroup<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"contract"</span>
  <span class="token keyword">rule</span> #KeyFromGroup<span class="token punctuation">(</span>G<span class="token punctuation">:</span>NowGroup<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"now"</span>
  <span class="token keyword">rule</span> #KeyFromGroup<span class="token punctuation">(</span>G<span class="token punctuation">:</span>SenderGroup<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"sender"</span>
  <span class="token keyword">rule</span> #KeyFromGroup<span class="token punctuation">(</span>G<span class="token punctuation">:</span>SourceGroup<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"source"</span>
  <span class="token keyword">rule</span> #KeyFromGroup<span class="token punctuation">(</span>G<span class="token punctuation">:</span>ChainGroup<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"chain_id"</span>
  <span class="token keyword">rule</span> #KeyFromGroup<span class="token punctuation">(</span>G<span class="token punctuation">:</span>SelfGroup<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"self"</span>
  <span class="token keyword">rule</span> #KeyFromGroup<span class="token punctuation">(</span>G<span class="token punctuation">:</span>AmountGroup<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"amount"</span>
  <span class="token keyword">rule</span> #KeyFromGroup<span class="token punctuation">(</span>G<span class="token punctuation">:</span>BalanceGroup<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"balance"</span>
  <span class="token keyword">rule</span> #KeyFromGroup<span class="token punctuation">(</span>G<span class="token punctuation">:</span>BigMapGroup<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"big_maps"</span>
  <span class="token keyword">rule</span> #KeyFromGroup<span class="token punctuation">(</span>G<span class="token punctuation">:</span>ContractsGroup<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"other_contracts"</span>
  <span class="token keyword">rule</span> #KeyFromGroup<span class="token punctuation">(</span>G<span class="token punctuation">:</span>CodeGroup<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"code"</span>
  <span class="token keyword">rule</span> #KeyFromGroup<span class="token punctuation">(</span>G<span class="token punctuation">:</span>InputGroup<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"input"</span>
  <span class="token keyword">rule</span> #KeyFromGroup<span class="token punctuation">(</span>G<span class="token punctuation">:</span>OutputGroup<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"output"</span>
  <span class="token keyword">rule</span> #KeyFromGroup<span class="token punctuation">(</span>G<span class="token punctuation">:</span>ParameterDecl<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"parameter"</span>
  <span class="token keyword">rule</span> #KeyFromGroup<span class="token punctuation">(</span>G<span class="token punctuation">:</span>ParameterValueGroup<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"parameter_value"</span>
  <span class="token keyword">rule</span> #KeyFromGroup<span class="token punctuation">(</span>G<span class="token punctuation">:</span>StorageValueGroup<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"storage_value"</span>

  <span class="token keyword">syntax</span> K <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #GroupContent<span class="token punctuation">(</span>Group<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
  <span class="token keyword">rule</span> #GroupContent<span class="token punctuation">(</span>contract <span class="token punctuation">{</span> C <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> C
  <span class="token keyword">rule</span> #GroupContent<span class="token punctuation">(</span>now C<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> C
  <span class="token keyword">rule</span> #GroupContent<span class="token punctuation">(</span>sender C<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> C
  <span class="token keyword">rule</span> #GroupContent<span class="token punctuation">(</span>source C<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> C
  <span class="token keyword">rule</span> #GroupContent<span class="token punctuation">(</span>chain_id C<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> C
  <span class="token keyword">rule</span> #GroupContent<span class="token punctuation">(</span>self C<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> C
  <span class="token keyword">rule</span> #GroupContent<span class="token punctuation">(</span>amount C<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> C
  <span class="token keyword">rule</span> #GroupContent<span class="token punctuation">(</span>balance C<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> C
  <span class="token keyword">rule</span> #GroupContent<span class="token punctuation">(</span>other_contracts <span class="token punctuation">{</span> C <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> C
  <span class="token keyword">rule</span> #GroupContent<span class="token punctuation">(</span>code C<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> C
  <span class="token keyword">rule</span> #GroupContent<span class="token punctuation">(</span>input C<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> C
  <span class="token keyword">rule</span> #GroupContent<span class="token punctuation">(</span>output C<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> C
  <span class="token keyword">rule</span> #GroupContent<span class="token punctuation">(</span>parameter C<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> C
  <span class="token keyword">rule</span> #GroupContent<span class="token punctuation">(</span>big_maps <span class="token punctuation">{</span> C <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> C
  <span class="token keyword">rule</span> #GroupContent<span class="token punctuation">(</span>parameter_value C<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> C
  <span class="token keyword">rule</span> #GroupContent<span class="token punctuation">(</span>storage_value C<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> C

  <span class="token keyword">syntax</span> JSON  <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #GroupsToJson<span class="token punctuation">(</span>Groups<span class="token punctuation">)</span>      <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
  <span class="token keyword">syntax</span> JSONs <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #GroupsToJsonInner<span class="token punctuation">(</span>Groups<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
  <span class="token keyword">syntax</span> JSON  <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #GroupToJson<span class="token punctuation">(</span>Group<span class="token punctuation">)</span>        <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
  <span class="token keyword">syntax</span> JSON  <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #GroupToJson<span class="token punctuation">(</span>Group<span class="token punctuation">,</span><span class="token keyword">Bool</span><span class="token punctuation">)</span>   <span class="token punctuation">[</span>function<span class="token punctuation">]</span>

  <span class="token keyword">rule</span> #GroupsToJson<span class="token punctuation">(</span>Gs<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> #GroupsToJsonInner<span class="token punctuation">(</span>Gs<span class="token punctuation">)</span> <span class="token punctuation">}</span>

  <span class="token keyword">rule</span> #GroupsToJsonInner<span class="token punctuation">(</span>G <span class="token punctuation">;</span> Gs<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #GroupToJson<span class="token punctuation">(</span>G<span class="token punctuation">)</span> <span class="token punctuation">,</span> #GroupsToJsonInner<span class="token punctuation">(</span>Gs<span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #GroupsToJsonInner<span class="token punctuation">(</span>G<span class="token punctuation">)</span>      <span class="token operator">=&gt;</span> #GroupToJson<span class="token punctuation">(</span>G<span class="token punctuation">)</span>

  <span class="token comment">// check if we need to add braces around our output group</span>
  <span class="token keyword">rule</span> #GroupToJson<span class="token punctuation">(</span>G<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #GroupToJson<span class="token punctuation">(</span>G<span class="token punctuation">,</span> #KeyFromGroup<span class="token punctuation">(</span>G<span class="token punctuation">)</span> in SetItem<span class="token punctuation">(</span><span class="token string">"other_contracts"</span><span class="token punctuation">)</span> SetItem<span class="token punctuation">(</span><span class="token string">"big_maps"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #GroupToJson<span class="token punctuation">(</span>G<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #KeyFromGroup<span class="token punctuation">(</span>G<span class="token punctuation">)</span> <span class="token punctuation">:</span>             #unparse<span class="token punctuation">(</span>#GroupContent<span class="token punctuation">(</span>G<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #GroupToJson<span class="token punctuation">(</span>G<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>  <span class="token operator">=&gt;</span> #KeyFromGroup<span class="token punctuation">(</span>G<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token string">"{"</span> <span class="token operator">+</span><span class="token keyword">String</span> #unparse<span class="token punctuation">(</span>#GroupContent<span class="token punctuation">(</span>G<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">"}"</span>

  <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> Gs<span class="token punctuation">:</span>Groups <span class="token operator">=&gt;</span> <span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>out</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span>List <span class="token operator">=&gt;</span> ListItem<span class="token punctuation">(</span>JSON2String<span class="token punctuation">(</span>#GroupsToJson<span class="token punctuation">(</span>Gs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>out</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>returncode</span><span class="token punctuation">&gt;</span></span> <span class="token number">1</span> <span class="token operator">=&gt;</span> <span class="token number">0</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>returncode</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">endmodule</span>
</code></pre>
<h2 id="input-creator">Input Creator</h2>
<pre class="language-k"><code><span class="token keyword">module</span> INPUT<span class="token operator">-</span>CREATOR<span class="token operator">-</span>SYNTAX
  <span class="token keyword">imports</span> UNIT<span class="token operator">-</span>TEST<span class="token operator">-</span>SYNTAX
<span class="token keyword">endmodule</span>

<span class="token keyword">module</span> INPUT<span class="token operator">-</span>CREATOR
  <span class="token keyword">imports</span> COMPAT<span class="token operator">-</span>COMMON

  <span class="token keyword">syntax</span> Data <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #DataForType<span class="token punctuation">(</span>Type<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
  <span class="token keyword">rule</span> #DataForType<span class="token punctuation">(</span>int _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">0</span>
  <span class="token keyword">rule</span> #DataForType<span class="token punctuation">(</span>nat _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">0</span>
  <span class="token keyword">rule</span> #DataForType<span class="token punctuation">(</span>string _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">""</span>
  <span class="token keyword">rule</span> #DataForType<span class="token punctuation">(</span>bytes _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">.</span>Bytes
  <span class="token keyword">rule</span> #DataForType<span class="token punctuation">(</span>mutez _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">0</span>
  <span class="token keyword">rule</span> #DataForType<span class="token punctuation">(</span>bool _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span>
  <span class="token keyword">rule</span> #DataForType<span class="token punctuation">(</span>key_hash _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"tz1TGu6TN5GSez2ndXXeDX6LgUDvLzPLqgYV"</span>
  <span class="token keyword">rule</span> #DataForType<span class="token punctuation">(</span>timestamp _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">0</span>
  <span class="token keyword">rule</span> #DataForType<span class="token punctuation">(</span>address _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"tz1TGu6TN5GSez2ndXXeDX6LgUDvLzPLqgYV"</span>

<span class="token comment">//  rule #DataForType(key _)</span>
  <span class="token keyword">rule</span> #DataForType<span class="token punctuation">(</span>unit _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Unit
<span class="token comment">//  rule #DataForType(signature _)</span>
<span class="token comment">//  rule #DataForType(operation _)</span>
<span class="token comment">//  rule #DataForType(chain_id _)</span>

  <span class="token keyword">rule</span> #DataForType<span class="token punctuation">(</span>pair _ T1<span class="token punctuation">:</span>Type T2<span class="token punctuation">:</span>Type<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Pair #DataForType<span class="token punctuation">(</span>T1<span class="token punctuation">)</span> #DataForType<span class="token punctuation">(</span>T2<span class="token punctuation">)</span>

  <span class="token keyword">rule</span> #DataForType<span class="token punctuation">(</span>option _ _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> None
  <span class="token keyword">rule</span> #DataForType<span class="token punctuation">(</span>list _ _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
  <span class="token keyword">rule</span> #DataForType<span class="token punctuation">(</span>set _ _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token comment">//  rule #DataForType(contract _ _) =&gt; None</span>
  <span class="token keyword">rule</span> #DataForType<span class="token punctuation">(</span>or _ T1 _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #DataForType<span class="token punctuation">(</span>T1<span class="token punctuation">)</span>
  <span class="token keyword">rule</span> #DataForType<span class="token punctuation">(</span>lambda _ _ T2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> DROP <span class="token punctuation">.</span>AnnotationList <span class="token punctuation">;</span> PUSH <span class="token punctuation">.</span>AnnotationList T2 #DataForType<span class="token punctuation">(</span>T2<span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token keyword">rule</span> #DataForType<span class="token punctuation">(</span>map _ _ _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
  <span class="token keyword">rule</span> #DataForType<span class="token punctuation">(</span>big_map _ _ _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

  <span class="token keyword">syntax</span> Type <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #FindParamType<span class="token punctuation">(</span>Pgm<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
  <span class="token keyword">rule</span> #FindParamType<span class="token punctuation">(</span>parameter T<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> T
  <span class="token keyword">rule</span> #FindParamType<span class="token punctuation">(</span>parameter T <span class="token punctuation">;</span> Rs<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> T
  <span class="token keyword">rule</span> #FindParamType<span class="token punctuation">(</span>_<span class="token punctuation">:</span>Group<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> unit <span class="token punctuation">.</span>AnnotationList <span class="token punctuation">[</span>owise<span class="token punctuation">]</span>
  <span class="token keyword">rule</span> #FindParamType<span class="token punctuation">(</span>_ <span class="token punctuation">;</span> Rs<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #FindParamType<span class="token punctuation">(</span>Rs<span class="token punctuation">)</span> <span class="token punctuation">[</span>owise<span class="token punctuation">]</span>

  <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> G<span class="token punctuation">:</span>Pgm <span class="token operator">=&gt;</span> <span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>out</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span>List <span class="token operator">=&gt;</span> ListItem<span class="token punctuation">(</span>#unparse<span class="token punctuation">(</span>#DataForType<span class="token punctuation">(</span>#FindParamType<span class="token punctuation">(</span>G<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>out</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">endmodule</span>
</code></pre>
<h2 id="output-compare">Output Compare</h2>
<pre class="language-k"><code><span class="token keyword">module</span> OUTPUT<span class="token operator">-</span>COMPARE<span class="token operator">-</span>COMMON<span class="token operator">-</span>SYNTAX
  <span class="token keyword">imports</span> UNIT<span class="token operator">-</span>TEST<span class="token operator">-</span>COMMON<span class="token operator">-</span>SYNTAX
  <span class="token keyword">syntax</span> RealOutputGroup <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> <span class="token string">"real_output"</span> OutputStack
  <span class="token keyword">syntax</span> Group <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> RealOutputGroup
<span class="token keyword">endmodule</span>

<span class="token keyword">module</span> OUTPUT<span class="token operator">-</span>COMPARE<span class="token operator">-</span>SYNTAX
  <span class="token keyword">imports</span> UNIT<span class="token operator">-</span>TEST<span class="token operator">-</span>SYNTAX
  <span class="token keyword">imports</span> OUTPUT<span class="token operator">-</span>COMPARE<span class="token operator">-</span>COMMON<span class="token operator">-</span>SYNTAX
<span class="token keyword">endmodule</span>

<span class="token keyword">module</span> OUTPUT<span class="token operator">-</span>COMPARE
  <span class="token keyword">imports</span> OUTPUT<span class="token operator">-</span>COMPARE<span class="token operator">-</span>COMMON<span class="token operator">-</span>SYNTAX
  <span class="token keyword">imports</span> COMPAT<span class="token operator">-</span>COMMON
  <span class="token keyword">imports</span> K<span class="token operator">-</span>REFLECTION
  <span class="token keyword">imports</span> MATCHER

  <span class="token keyword">syntax</span> KItem <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #decodeBinary<span class="token punctuation">(</span>Bytes<span class="token punctuation">)</span>  <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
  <span class="token comment">// -----------------------------------------------</span>
  <span class="token keyword">rule</span> #decodeBinary<span class="token punctuation">(</span>B<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #system<span class="token punctuation">(</span><span class="token string">"decode-michelson-operation.py "</span>
                           <span class="token operator">+</span><span class="token keyword">String</span> #unparseBytes<span class="token punctuation">(</span>B<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token keyword">syntax</span> BlockchainOperation <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #parseOperation<span class="token punctuation">(</span>KItem<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
  <span class="token comment">// -------------------------------------------------------------</span>
  <span class="token keyword">rule</span> #parseOperation<span class="token punctuation">(</span>#systemResult<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> Stdout<span class="token punctuation">,</span> _<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> #parseKORE<span class="token punctuation">(</span>Stdout<span class="token punctuation">)</span>

  <span class="token keyword">syntax</span> KItem <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #CheckOutput<span class="token punctuation">(</span>OutputStack<span class="token punctuation">,</span> OutputStack<span class="token punctuation">)</span> <span class="token comment">// Expected, Actual</span>

  <span class="token keyword">rule</span> #MichelineToNative<span class="token punctuation">(</span>B<span class="token punctuation">:</span>Bytes<span class="token punctuation">,</span> operation _<span class="token punctuation">,</span> KnownAddrs<span class="token punctuation">,</span> BigMaps<span class="token punctuation">)</span>
    <span class="token operator">=&gt;</span> #MichelineToNative<span class="token punctuation">(</span>#parseOperation<span class="token punctuation">(</span>#decodeBinary<span class="token punctuation">(</span>B<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                          operation <span class="token punctuation">.</span>AnnotationList<span class="token punctuation">,</span>
                          KnownAddrs<span class="token punctuation">,</span>
                          BigMaps<span class="token punctuation">)</span>

  <span class="token keyword">syntax</span> KItem <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> <span class="token string">"#Failed"</span>

  <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> #CheckOutput<span class="token punctuation">(</span> X<span class="token punctuation">:</span>FailedStack <span class="token punctuation">,</span> X<span class="token punctuation">:</span>FailedStack <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>

  <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> #CheckOutput<span class="token punctuation">(</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span>StackElementList <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span>StackElementList <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>

  <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> #CheckOutput<span class="token punctuation">(</span> <span class="token punctuation">{</span> Stack_elt ET ED <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token punctuation">{</span> Stack_elt AT AD <span class="token punctuation">}</span> <span class="token punctuation">)</span>
        <span class="token operator">=&gt;</span> <span class="token punctuation">.</span>
           <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>knownaddrs</span><span class="token punctuation">&gt;</span></span> KnownAddrs <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>knownaddrs</span><span class="token punctuation">&gt;</span></span>
    <span class="token keyword">requires</span> #Matches<span class="token punctuation">(</span>#MichelineToNative<span class="token punctuation">(</span>ED<span class="token punctuation">,</span> ET<span class="token punctuation">,</span> KnownAddrs<span class="token punctuation">,</span> <span class="token punctuation">.</span>Map<span class="token punctuation">)</span><span class="token punctuation">,</span>
                      #MichelineToNative<span class="token punctuation">(</span>AD<span class="token punctuation">,</span> AT<span class="token punctuation">,</span> KnownAddrs<span class="token punctuation">,</span> <span class="token punctuation">.</span>Map<span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> #CheckOutput<span class="token punctuation">(</span> <span class="token punctuation">{</span> Stack_elt ET ED <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token punctuation">{</span> Stack_elt AT AD <span class="token punctuation">}</span> <span class="token punctuation">)</span>
        <span class="token operator">=&gt;</span> #Failed
           <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>knownaddrs</span><span class="token punctuation">&gt;</span></span> KnownAddrs <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>knownaddrs</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>out</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
             <span class="token punctuation">.</span>List
          <span class="token operator">=&gt;</span> ListItem<span class="token punctuation">(</span><span class="token string">"Mismatch - Expected: "</span> <span class="token operator">+</span><span class="token keyword">String</span> #unparse<span class="token punctuation">(</span>#MichelineToNative<span class="token punctuation">(</span>ED<span class="token punctuation">,</span> ET<span class="token punctuation">,</span> KnownAddrs<span class="token punctuation">,</span> <span class="token punctuation">.</span>Map<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token keyword">String</span>
                                  <span class="token string">" Actual: "</span> <span class="token operator">+</span><span class="token keyword">String</span> #unparse<span class="token punctuation">(</span>#MichelineToNative<span class="token punctuation">(</span>AD<span class="token punctuation">,</span> AT<span class="token punctuation">,</span> KnownAddrs<span class="token punctuation">,</span> <span class="token punctuation">.</span>Map<span class="token punctuation">)</span><span class="token punctuation">)</span>
                     <span class="token punctuation">)</span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>out</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">[</span>owise<span class="token punctuation">]</span>

  <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> #CheckOutput<span class="token punctuation">(</span> <span class="token punctuation">{</span> Stack_elt ET ED <span class="token punctuation">;</span> Es <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token punctuation">{</span> Stack_elt AT AD <span class="token punctuation">;</span> As <span class="token punctuation">}</span> <span class="token punctuation">)</span>
        <span class="token operator">=&gt;</span> #CheckOutput<span class="token punctuation">(</span> <span class="token punctuation">{</span> Es <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token punctuation">{</span> As <span class="token punctuation">}</span> <span class="token punctuation">)</span>
           <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>knownaddrs</span><span class="token punctuation">&gt;</span></span> KnownAddrs <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>knownaddrs</span><span class="token punctuation">&gt;</span></span>
    <span class="token keyword">requires</span> #Matches<span class="token punctuation">(</span>#MichelineToNative<span class="token punctuation">(</span>ED<span class="token punctuation">,</span> ET<span class="token punctuation">,</span> KnownAddrs<span class="token punctuation">,</span> <span class="token punctuation">.</span>Map<span class="token punctuation">)</span><span class="token punctuation">,</span> #MichelineToNative<span class="token punctuation">(</span>AD<span class="token punctuation">,</span> AT<span class="token punctuation">,</span> KnownAddrs<span class="token punctuation">,</span> <span class="token punctuation">.</span>Map<span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> #CheckOutput<span class="token punctuation">(</span> <span class="token punctuation">{</span> Stack_elt ET ED <span class="token punctuation">;</span> Es <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token punctuation">{</span> Stack_elt AT AD <span class="token punctuation">;</span> As <span class="token punctuation">}</span> <span class="token punctuation">)</span>
        <span class="token operator">=&gt;</span> #Failed
           <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>knownaddrs</span><span class="token punctuation">&gt;</span></span> KnownAddrs <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>knownaddrs</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>out</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
             <span class="token punctuation">.</span>List
          <span class="token operator">=&gt;</span> ListItem<span class="token punctuation">(</span><span class="token string">"Mismatch - Expected: "</span> <span class="token operator">+</span><span class="token keyword">String</span> #unparse<span class="token punctuation">(</span>#MichelineToNative<span class="token punctuation">(</span>ED<span class="token punctuation">,</span> ET<span class="token punctuation">,</span> KnownAddrs<span class="token punctuation">,</span> <span class="token punctuation">.</span>Map<span class="token punctuation">)</span><span class="token punctuation">)</span>
                          <span class="token operator">+</span><span class="token keyword">String</span> <span class="token string">" Actual: "</span> <span class="token operator">+</span><span class="token keyword">String</span> #unparse<span class="token punctuation">(</span>#MichelineToNative<span class="token punctuation">(</span>AD<span class="token punctuation">,</span> AT<span class="token punctuation">,</span> KnownAddrs<span class="token punctuation">,</span> <span class="token punctuation">.</span>Map<span class="token punctuation">)</span><span class="token punctuation">)</span>
                     <span class="token punctuation">)</span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>out</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">[</span>owise<span class="token punctuation">]</span>

  <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> other_contracts <span class="token punctuation">{</span> M <span class="token punctuation">}</span> <span class="token punctuation">;</span> Gs <span class="token operator">=&gt;</span> Gs <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>knownaddrs</span><span class="token punctuation">&gt;</span></span> _ <span class="token operator">=&gt;</span> #OtherContractsMapToKMap<span class="token punctuation">(</span>M<span class="token punctuation">)</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>knownaddrs</span><span class="token punctuation">&gt;</span></span>

  <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> real_output AOS <span class="token punctuation">;</span> output EOS <span class="token operator">=&gt;</span> #CheckOutput<span class="token punctuation">(</span>EOS<span class="token punctuation">,</span> AOS<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">endmodule</span>
</code></pre>
</body></html></div>
        </main>

        <!-- Page ToC -->
        <div class="col-12 col-md-3 col-xl-2 py-md-3 bd-sidebar page-toc mb-3">
          
<div>
<details style="padding:0.25rem 0;;padding-left: 0px;" open>
            <summary class="bd-toc-link-wrapper">
              <a href="#compatability-layer-for-tezos-client" class="bd-toc-link">Compatability Layer for Tezos Client</a>
              </summary>
            <div>
              <details style="padding:0.25rem 0;;padding-left: 8px;" open>
            <summary class="bd-toc-link-wrapper">
              <a href="#michelson-unparser" class="bd-toc-link">Michelson Unparser</a>
              </summary>
            <div>
              <div class="bd-toc-link-wrapper" style="padding:0.25rem 0;">
              <a
                href="#core-michelson-unparsing"
                class="bd-toc-link"
                style="padding-left: 16px;;"
              >
                Core Michelson Unparsing
              </a></div><div class="bd-toc-link-wrapper" style="padding:0.25rem 0;">
              <a
                href="#macro-unparsing"
                class="bd-toc-link"
                style="padding-left: 16px;;"
              >
                Macro Unparsing
              </a></div><div class="bd-toc-link-wrapper" style="padding:0.25rem 0;">
              <a
                href="#michelson-groups%2Ftzt-extexnsion-unparsing"
                class="bd-toc-link"
                style="padding-left: 16px;;"
              >
                Michelson Groups/TZT Extexnsion Unparsing
              </a></div>
            </div>
          </details>
        <div class="bd-toc-link-wrapper" style="padding:0.25rem 0;">
              <a
                href="#common"
                class="bd-toc-link"
                style="padding-left: 8px;;"
              >
                Common
              </a></div><div class="bd-toc-link-wrapper" style="padding:0.25rem 0;">
              <a
                href="#contract-expander"
                class="bd-toc-link"
                style="padding-left: 8px;;"
              >
                Contract Expander
              </a></div><div class="bd-toc-link-wrapper" style="padding:0.25rem 0;">
              <a
                href="#extractor"
                class="bd-toc-link"
                style="padding-left: 8px;;"
              >
                Extractor
              </a></div><div class="bd-toc-link-wrapper" style="padding:0.25rem 0;">
              <a
                href="#input-creator"
                class="bd-toc-link"
                style="padding-left: 8px;;"
              >
                Input Creator
              </a></div><div class="bd-toc-link-wrapper" style="padding:0.25rem 0;">
              <a
                href="#output-compare"
                class="bd-toc-link"
                style="padding-left: 8px;;"
              >
                Output Compare
              </a></div>
            </div>
          </details>
        
</div>

        </div>
        <div class="btn btn-rv-blue page-toc-toggle-btn"></div>
        <!-- End Page ToC -->
      </div>
    </div>
<!-- The footer is now controlled by the k-web-theme git submodule -->
<footer id="rvsite-footer" class="app-footer text-md-left text-center">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-4 mb-md-0 mb-4">
        <a href="https://runtimeverification.com/" target="_blank">
          <picture>
            <source
              srcset="
                https://runtimeverification.com/assets/img/rv-logo-dark.png
              "
              media="(prefers-color-scheme: dark)"
            />
            <img
              class="logo-dark"
              src="https://runtimeverification.com/assets/img/rv-logo.png"
              alt="Runtime Verification logo"
              style="height: 32px"
            /> </picture
        ></a>
        <p class="mt-2 text-md-left copyright">
          <a href="https://goo.gl/maps/hKLtCjeEd6yqfzwx5" target="_blank"
            >1807 S Neil Street, Champaign, IL 61820</a
          >
        </p>
      </div>
      <div class="col-md-4 text-md-center mb-md-0 mb-4"></div>
      <div class="col-md-4 mb-md-0 mb-4 text-md-right">
        <p class="copyright">2022 © all rights reserved</p>
      </div>
    </div>
  </div>
</footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Typist/1.2/typist.min.js"></script>
    <script src="../assets/js/index.js"></script>
  </body>
</html>
